[gd_scene load_steps=14 format=3 uid="uid://by1xajmtjokfw"]

[ext_resource type="Script" path="res://scripts/car.gd" id="1_kbort"]
[ext_resource type="Script" path="res://addons/planetary_processing/pp_entity_node.gd" id="3_348wp"]
[ext_resource type="PackedScene" uid="uid://batqyej78slht" path="res://models/carro.glb" id="3_ja2rn"]

[sub_resource type="BoxShape3D" id="BoxShape3D_4vuy8"]
size = Vector3(7, 7, 16)

[sub_resource type="PrismMesh" id="PrismMesh_8kndm"]
size = Vector3(7, 7, 16)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_d5xm2"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ct5ug"]
albedo_color = Color(1, 0.498039, 0, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_6en8y"]
albedo_color = Color(1, 1, 0, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_oc1ek"]
albedo_color = Color(0, 1, 0, 1)

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_mum0w"]
angle_min = -60.0
angle_max = 120.0
spread = 25.482
initial_velocity_min = 1.0
initial_velocity_max = 2.0
gravity = Vector3(0, 0, 0)

[sub_resource type="SphereMesh" id="SphereMesh_nf8rm"]

[sub_resource type="SphereShape3D" id="SphereShape3D_orpxj"]
radius = 20.0

[sub_resource type="BoxShape3D" id="BoxShape3D_vvpdt"]
size = Vector3(2.91251, 5.29794, 2.64606)

[node name="Car" type="Area3D"]
script = ExtResource("1_kbort")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.3448, 0)
shape = SubResource("BoxShape3D_4vuy8")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
visible = false
mesh = SubResource("PrismMesh_8kndm")

[node name="PPEntityNode" type="Node" parent="."]
script = ExtResource("3_348wp")
type = "car"

[node name="Node3D" type="Node3D" parent="."]

[node name="carro" parent="Node3D" instance=ExtResource("3_ja2rn")]
transform = Transform3D(2.3, 0, 0, 0, 2.3, 0, 0, 0, 2.3, 0, 3.59637, -0.699938)

[node name="waterlvl_001" parent="Node3D/carro" index="11"]
material_override = SubResource("StandardMaterial3D_d5xm2")

[node name="waterlvl_002" parent="Node3D/carro" index="12"]
material_override = SubResource("StandardMaterial3D_ct5ug")

[node name="waterlvl_003" parent="Node3D/carro" index="13"]
material_override = SubResource("StandardMaterial3D_6en8y")

[node name="waterlvl_004" parent="Node3D/carro" index="14"]
material_override = SubResource("StandardMaterial3D_oc1ek")

[node name="OmniLight3D" type="OmniLight3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.504903, 2.68835, 0.327893)
light_color = Color(1, 0.434811, 0.366139, 1)
shadow_enabled = true

[node name="SpotLight3D" type="SpotLight3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, -0.993609, 0.112874, 0, -0.112874, -0.993609, 0.052788, 3.42882, 6.77647)
shadow_enabled = true
spot_range = 3.47439
spot_angle = 81.612

[node name="SpotLight3D" type="SpotLight3D" parent="Node3D/SpotLight3D"]
transform = Transform3D(1, 0, 0, 0, 0.954204, 0.299157, 0, -0.299157, 0.954204, 0, 0.0528086, -0.184275)
shadow_enabled = true
spot_range = 47.106
spot_attenuation = -0.82
spot_angle = 32.3859

[node name="OmniLight3D" type="OmniLight3D" parent="Node3D/SpotLight3D"]
transform = Transform3D(1, 0, 0, 0, 1, 7.45058e-09, 0, 0, 1, 0, -0.482744, -1.06729)
omni_range = 2.35081
omni_attenuation = -1.286

[node name="GPUParticles3D2" type="GPUParticles3D" parent="Node3D"]
transform = Transform3D(-0.100004, -2.28712, -0.221594, 2.29783, -0.0995376, -0.00964401, 2.60813e-09, -0.221804, 2.28928, -0.0390236, 7.04257, -2.17268)
visibility_range_fade_mode = 1
amount = 15
lifetime = 1.94
preprocess = 3.0
explosiveness = 0.23
randomness = 0.29
collision_base_size = 0.0
trail_lifetime = 1.61
process_material = SubResource("ParticleProcessMaterial_mum0w")
draw_pass_1 = SubResource("SphereMesh_nf8rm")

[node name="GPUParticles3D3" type="GPUParticles3D" parent="Node3D"]
transform = Transform3D(-0.100004, -2.28712, -0.221594, 2.29783, -0.0995376, -0.00964401, 2.60813e-09, -0.221804, 2.28928, -0.0390236, 6.34556, -0.39833)
visibility_range_fade_mode = 1
amount = 15
lifetime = 1.94
preprocess = 3.0
explosiveness = 0.23
randomness = 0.29
collision_base_size = 0.0
trail_lifetime = 1.61
process_material = SubResource("ParticleProcessMaterial_mum0w")
draw_pass_1 = SubResource("SphereMesh_nf8rm")

[node name="VisibleOnScreenEnabler3D" type="VisibleOnScreenEnabler3D" parent="Node3D"]
transform = Transform3D(2.3, 0, 0, 0, 2.3, 0, 0, 0, 2.3, 0, 3.59637, -0.699938)
aabb = AABB(-1, -1, -1, 2, 6, 2)
enable_node_path = NodePath("../carro")

[node name="distancia1" type="Area3D" parent="Node3D"]
transform = Transform3D(0.214039, 0, 0, 0, 0.401726, 0, 0, 0, 0.303432, 0, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/distancia1"]
transform = Transform3D(4.2691, 0, 0, 0, 2.27592, 0, 0, 0, 3.69349, 0, 0, 0)
shape = SubResource("SphereShape3D_orpxj")

[node name="caldera_detector" type="Area3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.5342, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/caldera_detector"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.302601, 2.21225, 0.329741)
shape = SubResource("BoxShape3D_vvpdt")

[node name="calderaagua_detector2" type="Area3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.83134, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node3D/calderaagua_detector2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.643817, 2.21225, 0.329741)
shape = SubResource("BoxShape3D_vvpdt")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Node3D"]

[connection signal="body_entered" from="Node3D/distancia1" to="." method="_on_area_3d_body_entered"]
[connection signal="body_exited" from="Node3D/distancia1" to="." method="_on_area_3d_body_exited"]
[connection signal="body_entered" from="Node3D/caldera_detector" to="." method="_on_caldera_detector_body_entered"]
[connection signal="body_entered" from="Node3D/calderaagua_detector2" to="." method="_on_calderaagua_detector_2_body_entered"]
[connection signal="body_exited" from="Node3D/calderaagua_detector2" to="." method="_on_calderaagua_detector_2_body_exited"]

[editable path="Node3D/carro"]
